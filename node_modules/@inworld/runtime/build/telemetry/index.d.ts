import { DequeueSpanTracesResponse } from '../common/api/library';
import type { ProcessContext } from '../graph/nodes/custom/process_context_Impl';
import { ExporterType, LogLevel, MetricType } from './types';
type NativeSpan = {
    setAttribute(key: string, value: string): void;
    setOk(): void;
    setError(description: string): void;
    end(): void;
    recordMetric(request: any): void;
    logMessage(request: any): void;
    dequeueSpanTraces(count: number): any;
    startSpan(name: string, parent?: NativeSpan): NativeSpan;
};
/**
 * Configuration for a metric
 * @description Defines the properties required to configure a telemetry metric
 */
export interface MetricConfig {
    /**
     * The type of metric to configure
     * @type {MetricType}
     */
    metricType: MetricType;
    /**
     * The unique name identifier for the metric
     * @type {string}
     * @description Used to identify and query the metric in telemetry systems
     */
    name: string;
    /**
     * Human-readable description of what the metric measures
     * @type {string}
     * @optional
     */
    description?: string;
    /**
     * Unit of measurement for the metric values
     * @type {string}
     * @optional
     * @example "bytes", "seconds", "requests", "percentage"
     */
    unit?: string;
}
/**
 * Configuration for telemetry logging.
 * @description Runtime logger configuration.
 */
export interface LoggerConfig {
    /**
     * Minimum log level to emit.
     * @type {LogLevel}
     * @default LogLevel.Info
     */
    level?: LogLevel;
    /**
     * @internal
     * Whether ABSL logs from the native runtime are forwarded into telemetry.
     * @type {boolean}
     * @default false
     */
    sinkAbslLogs?: boolean;
}
/**
 * Configuration for distributed tracing.
 * @description Extends the runtime tracer controls exposed by the proto schema.
 */
export interface TracerConfig {
    /**
     * Sampling rate between 0.0 and 1.0.
     * @type {number}
     * @default 1
     */
    samplingRate?: number;
    /**
     * Absolute path where captured spans should be dumped for troubleshooting.
     * @type {string}
     */
    spanDumpPath?: string;
    /**
     * Enables the span capture queue, required before calling {@link
     * Span#dequeueSpanTraces}.
     * @type {boolean}
     * @default false
     */
    enableSpanCapture?: boolean;
    /**
     * Maximum number of spans retained in the capture queue.
     * @type {number}
     * @default 50
     */
    maxSpanCaptureQueueSize?: number;
}
/**
 * Main configuration for telemetry system initialization
 * @description Comprehensive configuration object for setting up telemetry
 */
export interface TelemetryConfig {
    /**
     * Application name for service identification
     * @type {string}
     * @optional
     * @description Used as service.name and app.name in telemetry attributes
     * @default DEFAULT_TELEMETRY_APP_NAME
     */
    appName?: string;
    /**
     * Application version for tracking deployments
     * @type {string}
     * @optional
     * @description Used as service.version and app.version in telemetry
     * attributes
     * @default DEFAULT_TELEMETRY_APP_VERSION
     */
    appVersion?: string;
    /**
     * Telemetry endpoint URL
     * @type {string}
     * @optional
     * @description Where telemetry data will be sent. If not provided, uses
     * environment-based endpoint
     */
    endpoint?: string;
    /**
     * API key for telemetry service authentication
     * @type {string}
     * @required
     * @description Required for authenticating with the telemetry service
     */
    apiKey: string;
    /**
     * Logger configuration settings
     * @type {LoggerConfig}
     * @optional
     * @description Controls logging behavior and verbosity
     */
    logger?: LoggerConfig;
    /**
     * Tracer configuration settings
     * @type {TracerConfig}
     * @optional
     * @description Controls distributed tracing behavior
     */
    tracer?: TracerConfig;
    /**
     * Type of telemetry exporter to use
     * @type {ExporterType}
     * @optional
     * @default ExporterType.REMOTE
     * @description Determines where telemetry data is exported
     */
    exporterType?: ExporterType;
    /**
     * Optional override for SDK name reported to telemetry.
     * Defaults to `Inworld Runtime Node.js SDK`.
     */
    sdkName?: string;
    /**
     * Optional override for SDK version reported to telemetry.
     * Defaults to package version.
     */
    sdkVersion?: string;
    /**
     * Timeout, in milliseconds, to wait for the exporter to flush pending data.
     * @type {number}
     * @default 1000
     */
    flushTimeoutMs?: number;
    /**
     * Timeout, in milliseconds, to wait for telemetry shutdown.
     * @type {number}
     * @default 2000
     */
    shutdownTimeoutMs?: number;
}
/**
 * Metric recording utilities
 * @description Provides functions to record different types of metrics with
 * optional tags. All helpers throw {@link InworldError} if telemetry is not
 * initialized via {@link initTelemetry}.
 */
export declare const metric: {
    /**
     * Records an unsigned integer counter metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The counter value to record
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordCounterUInt('requests_total', 1, { endpoint: '/api/users',
     * method: 'GET' });
     * ```
     */
    recordCounterUInt(name: string, value: number, tags?: Record<string, string>): void;
    /**
     * Records a double precision counter metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The counter value to record
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordCounterDouble('bytes_processed', 1024.5, { data_type: 'json'
     * });
     * ```
     */
    recordCounterDouble(name: string, value: number, tags?: Record<string, string>): void;
    /**
     * Records an integer gauge metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The gauge value to record
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordGaugeInt('active_connections', 42, { server: 'web-01' });
     * ```
     */
    recordGaugeInt(name: string, value: number, tags?: Record<string, string>): void;
    /**
     * Records a double precision gauge metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The gauge value to record
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordGaugeDouble('cpu_usage_percent', 75.5, { core: '0' });
     * ```
     */
    recordGaugeDouble(name: string, value: number, tags?: Record<string, string>): void;
    /**
     * Records an unsigned integer histogram metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The value to record in the histogram
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordHistogramUInt('request_duration_ms', 150, { endpoint:
     * '/api/data' });
     * ```
     */
    recordHistogramUInt(name: string, value: number, tags?: Record<string, string>): void;
    /**
     * Records a double precision histogram metric
     * @param {string} name - The name of the metric to record
     * @param {number} value - The value to record in the histogram
     * @param {Record<string, string>} [tags] - Optional key-value tags for the
     *     metric
     * @example
     * ```typescript
     * metric.recordHistogramDouble('memory_usage_mb', 512.75, { process:
     * 'worker-1' });
     * ```
     */
    recordHistogramDouble(name: string, value: number, tags?: Record<string, string>): void;
};
/**
 * Shuts down the telemetry system
 * @description Stops telemetry collection and cleans up all resources. Safe to
 * call multiple times.
 * @example
 * ```typescript
 * // Gracefully shutdown telemetry before application exit
 * shutdown();
 * ```
 */
export declare const shutdown: () => void;
/**
 * Initializes the telemetry system
 * @description Sets up telemetry collection with the provided configuration
 * @param {TelemetryConfig} props - Configuration for telemetry initialization
 * @throws {InworldError} When apiKey is missing or initialization fails
 * @example
 * ```typescript
 * init({
 *   apiKey: 'your-api-key',
 *   appName: 'my-application',
 *   appVersion: '1.0.0',
 *   logger: { level: LogLevel.INFO },
 *   tracer: { samplingRate: 0.1 }
 * });
 * ```
 */
export declare const init: (props: TelemetryConfig) => void;
/**
 * Configures a metric with the telemetry system
 * @description Registers a metric definition for later use in recording data
 * @param {MetricConfig} config - Configuration for the metric to
 *     register
 * @throws {InworldError} When metric name is missing or configuration fails
 * @example
 * ```typescript
 * configureMetric({
 *   metricType: MetricType.COUNTER_UINT,
 *   name: 'requests_total',
 *   description: 'Total number of HTTP requests',
 *   unit: 'requests'
 * });
 * ```
 */
export declare const configureMetric: (config: MetricConfig) => void;
/**
 * Span class for distributed tracing
 * @description Represents a span in distributed tracing, allowing you to track
 * operations and add attributes
 */
export declare class Span {
    private nativeSpan;
    /**
     * Creates a new Span instance
     * @param {NativeSpan} nativeSpan - The native span reference from SpanWrapper
     * @internal
     */
    constructor(nativeSpan: NativeSpan);
    /**
     * Sets a string attribute on the span
     * @param {string} key - The attribute key
     * @param {string} value - The attribute value
     */
    setAttribute(key: string, value: string): void;
    /**
     * Sets an array of strings as an attribute on the span
     * @param {string} key - The attribute key
     * @param {string[]} values - The array of string values
     * @description Currently only supports setting individual attributes. Array
     * values are joined with commas.
     */
    setAttributeArray(key: string, values: string[]): void;
    /**
     * Sets the span status to OK
     * @description Marks the span as successfully completed
     */
    setOK(): void;
    /**
     * Sets the span status to Error with a description
     * @param {string} description - Description of the error
     * @description Marks the span as failed with an error description
     */
    setError(description: string): void;
    /**
     * Ends the span
     * @description Marks the span as completed and sends it to the telemetry
     * system
     */
    end(): void;
    /**
     * Retrieves span traces from the capture queue.
     * @param {number} count - Maximum number of spans to dequeue.
     * @returns {DequeueSpanTracesResponse} Dequeued span data.
     * @throws {InworldError} When telemetry has not been initialized.
     * @description Requires `tracer.enableSpanCapture` to be set when
     * calling {@link initTelemetry}. The queue is FIFO and consumes entries on
     * read.
     */
    dequeueSpanTraces(count: number): DequeueSpanTracesResponse;
    /**
     * Gets the native span reference
     * @returns {NativeSpan} The native span reference
     * @internal
     */
    getNativeSpan(): NativeSpan;
}
/**
 * Starts a new span for distributed tracing
 * @param {string} name - The name of the span
 * @returns {Span} A new span instance
 */
export declare const startSpan: (name: string) => Span;
/**
 * Starts a new span with initial attributes
 * @param {string} name - The name of the span
 * @param {Record<string, string>} attributes - Initial attributes to set on the
 *     span
 * @returns {Span} A new span instance with the specified attributes
 */
export declare const startSpanWithAttributes: (name: string, attributes: Record<string, string>) => Span;
/**
 * Starts a new span with a parent span for distributed tracing
 * @param {string} name - The name of the span
 * @param {Record<string, string>} attributes - Initial attributes to set on the
 *     span
 * @param {Span[]} _links - Array of spans to link to this span (not yet
 *     implemented)
 * @param {Span} parent - The parent span
 * @returns {Span} A new span instance with parent relationship
 * @throws {InworldError} When telemetry has not been initialized
 * @description The parent must originate from this SDK (i.e. created via {@link
 * startSpan}). Links are reserved for future support.
 */
export declare const startSpanWithParent: (name: string, attributes: Record<string, string>, _links: Span[], parent: Span) => Span;
/**
 * Logging utilities
 * @description Provides functions to log messages with different levels and
 * optional context
 */
export declare const logger: {
    /**
     * Logs a message with the specified log level
     * @param {LogLevel} level - The log level for the message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [_processContext] - Optional process context to add
     *     execution info (not implemented)
     * @throws {InworldError} When telemetry has not been initialized
     * @example
     * ```typescript
     * logger.log(LogLevel.INFO, 'User logged in', { userId: '123', method:
     * 'oauth' }); logger.log(LogLevel.ERROR, 'Database connection failed', {});
     * ```
     */
    log(level: LogLevel, message: string, context?: Record<string, string>, _processContext?: ProcessContext): void;
    /**
     * Logs a trace level message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [processContext] - Optional process context to add
     *     execution info
     * @example
     * ```typescript
     * logger.trace('Entering function processData', { functionName:
     * 'processData', args: 'user123' }); logger.trace('Processing node', {},
     * processContext);
     * ```
     */
    trace(message: string, context?: Record<string, string>, processContext?: ProcessContext): void;
    /**
     * Logs a debug level message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [processContext] - Optional process context to add
     *     execution info
     * @example
     * ```typescript
     * logger.debug('Processing user data', { userId: '123', operation: 'update'
     * }); logger.debug('Node processing', {}, processContext);
     * ```
     */
    debug(message: string, context?: Record<string, string>, processContext?: ProcessContext): void;
    /**
     * Logs an info level message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [processContext] - Optional process context to add
     *     execution info
     * @example
     * ```typescript
     * logger.info('User successfully authenticated', { userId: '123', provider:
     * 'google' }); logger.info('Node execution completed', {}, processContext);
     * ```
     */
    info(message: string, context?: Record<string, string>, processContext?: ProcessContext): void;
    /**
     * Logs a warning level message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [processContext] - Optional process context to add
     *     execution info
     * @example
     * ```typescript
     * logger.warn('API rate limit approaching', { currentUsage: '80%', endpoint:
     * '/api/users' }); logger.warn('Node processing slow', {}, processContext);
     * ```
     */
    warn(message: string, context?: Record<string, string>, processContext?: ProcessContext): void;
    /**
     * Logs an error level message
     * @param {string} message - The message to log
     * @param {Record<string, string>} [context] - Optional key-value context for
     *     the log message
     * @param {ProcessContext} [processContext] - Optional process context to add
     *     execution info
     * @example
     * ```typescript
     * logger.error('Database connection failed', { error: 'ECONNREFUSED', host:
     * 'db.example.com' }); logger.error('Node execution failed', { error:
     * 'timeout' }, processContext);
     * ```
     */
    error(message: string, context?: Record<string, string>, processContext?: ProcessContext): void;
};
export {};
